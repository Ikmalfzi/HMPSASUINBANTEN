<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Berita</title>

     <script src="https://cdn.tailwindcss.com">
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  
  
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji",
        "Segoe UI Emoji";
      margin: 0;
      padding: 0;
      background-color: #f9fafb;
    }
    header {
      background-color: #22c55e;
      color: white;
      padding: 1rem 0;
      text-align: center;
      font-size: 1.875rem; /* 30px */
      font-weight: 800;
      margin-bottom: 2rem;
      box-shadow: 0 2px 4px rgb(0 0 0 / 0.1);
      user-select: none;
    }
       /* Custom scrollbar for dropdown */
  ::-webkit-scrollbar {
    width: 6px;
  }
  ::-webkit-scrollbar-thumb {
    background-color: #10b981;
    border-radius: 10px;
  }
    
    .container {
      max-width: 900px;
      margin: 0 auto 3rem;
      padding: 2rem 1.5rem;
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgb(0 0 0 / 0.1);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 2rem;
    }
    article.card {
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 4px 8px rgb(0 0 0 / 0.1);
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      user-select: none;
      transition: box-shadow 0.3s;
    }
    article.card:hover {
      box-shadow: 0 8px 16px rgb(0 0 0 / 0.15);
    }
    h2.article-title {
      font-size: 1.5rem; /* 24px */
      font-weight: 900;
      margin-bottom: 0.5rem;
      user-select: none;
    }
    p.article-date {
      font-size: 0.875rem; /* 14px */
      color: #4b5563;
      margin-bottom: 1rem;
      user-select: none;
    }
    img.article-image {
      width: 100%;
      border-radius: 0.5rem;
      margin-bottom: 1rem;
      object-fit: cover;
      height: 180px;
      flex-shrink: 0;
    }
    p.article-summary {
      font-size: 1.125rem; /* 18px */
      color: #111827;
      margin-bottom: 1rem;
      line-height: 1.6;
      flex-grow: 1;
      user-select: text;
    }
    button.read-more-btn {
      background: none;
      border: none;
      color: #22c55e;
      font-weight: 700;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 1.125rem; /* 18px */
      padding: 0;
      user-select: none;
      transition: color 0.2s;
      align-self: flex-start;
    }
    button.read-more-btn:hover {
      text-decoration: underline;
      color: #16a34a;
    }
    /* Modal styles */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      padding: 1rem;
    }
    .modal-content {
      background: white;
      border-radius: 0.75rem;
      max-width: 700px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 2rem;
      position: relative;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1.5rem;
      font-size: 2.5rem;
      font-weight: 900;
      color: #4b5563;
      background: none;
      border: none;
      cursor: pointer;
      line-height: 1;
      user-select: none;
      transition: color 0.2s;
    }
    .modal-close:hover {
      color: #111827;
    }
    .modal-image {
      width: 100%;
      border-radius: 0.5rem;
      margin-bottom: 1.5rem;
      object-fit: cover;
      max-height: 350px;
    }
    .modal-title {
      font-size: 2rem; /* 32px */
      font-weight: 900;
      margin-bottom: 1rem;
      user-select: none;
    }
    .modal-date {
      font-size: 1rem; /* 16px */
      color: #6b7280;
      margin-bottom: 1.5rem;
      user-select: none;
    }
    .modal-text {
      font-size: 1.125rem; /* 18px */
      color: #111827;
      white-space: pre-line;
      line-height: 1.7;
      user-select: text;
    }
    
.section-title {
  font-size: 1.875rem; /* 3xl */
  font-weight: 700;
  margin-bottom: 1.5rem;
  padding: 10px 8px ;
  border-bottom: 4px solid #16a34a; /* Tailwind green-600 */
  display: inline-block;
}

.news-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  padding: 10px 8px ;
}

    
  </style>
</head>
<body>
    <nav class="bg-[#2ecc71] flex flex-wrap items-center justify-between px-4 py-5">
   <div class="flex flex-col">
    <h1 class="text-black font-bold text-sm sm:text-base md:text-lg leading-tight">
     HMPS ASURANSI SYARI'AH
    </h1>
    <p class="text-black text-[8px] sm:text-xs md:text-sm font-semibold leading-tight mt-0.5">
     UIN SULTAN MAULANA HASANUDDIN BANTEN
    </p>
   </div>
   <!-- Desktop nav links and Struktur dropdown -->
   <ul class="hidden sm:flex items-center space-x-2 text-black text-xs sm:text-sm md:text-base font-semibold">
    <li>
     <a class="hover:underline" href="home.html">
      HOME
     </a>
    </li>
    <li>
     <a class="hover:underline" href="about.html">
      ABOUT
     </a>
    </li>
    <li class="relative group">
     <button aria-expanded="false" aria-haspopup="true" class="bg-white text-black font-bold rounded px-2 py-0.5 text-[10px] sm:text-xs md:text-sm flex items-center space-x-1 border border-black hover:bg-[#10b981] hover:text-white transition" id="strukturBtn" onclick="toggleDropdown()" type="button">
      <span>
       STRUKTUR
      </span>
      <i class="fas fa-caret-down text-xs">
      </i>
     </button>
     <ul aria-label="Struktur submenu" class="absolute right-0 mt-1 w-28 bg-white border border-black rounded shadow-md text-black text-[10px] sm:text-xs md:text-sm font-semibold hidden z-50" id="strukturDropdown" role="menu">
             <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Struktur.html">
        Struktur
       </a>
      </li>
      <li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="bph.html">
        BADAN PENGURUS HARIAN
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Internal.html">
        INTERNAL
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Ekternal.html">
        EKSTERNAL
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Kominfo.html">
        KOMINFO
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="pao.html">
        PAO
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Ekraf.html">
        EKRAF
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="PP.html">
        PP
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a class="hover:underline" href="berita.html">
      BERITA
     </a>
    </li>
    <li>
     <a class="hover:underline" href="kontak.html">
      KONTAK
     </a>
    </li>
   </ul>

   <!-- Mobile menu button -->
   <button aria-label="Toggle menu" class="sm:hidden text-black text-xl focus:outline-none" id="mobileMenuBtn" onclick="toggleMobileMenu()" type="button">
    <i class="fas fa-bars">
    </i>
   </button>
  </nav>
  <!-- Mobile menu -->
  <div class="hidden bg-[#2ecc71] px-4 pb-6 sm:hidden" id="mobileMenu">
   <ul class="flex flex-col space-y-2 text-black text-sm font-semibold">
    <li>

    <li>
     <a class="block py-1 hover:underline" href="home.html">
      HOME
     </a>
    </li>
    <li>
     <a class="block py-1 hover:underline" href="about.html">
      ABOUT
     </a>
    </li>
    
         <button aria-expanded="false" aria-haspopup="true" class="w-full text-left bg-white text-black font-bold rounded px-2 py-1 flex items-center justify-between border border-black hover:bg-[#10b981] hover:text-white transition" id="mobileStrukturBtn" onclick="toggleMobileDropdown()" type="button">
      <span>
       STRUKTUR
      </span>
      <i class="fas fa-caret-down">
      </i>
     </button>
     <ul aria-label="Struktur submenu mobile" class="hidden mt-1 bg-white border border-black rounded shadow-md text-black font-semibold" id="mobileStrukturDropdown" role="menu">
      <li>      <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Struktur.html">
        Struktur
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="bph.html">
        BADAN PENGURUS HARIAN
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Internal.html">
        INTERNAL
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Ekternal.html">
        EKSTERNAL
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Kominfo.html">
        KOMINFO
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="pao.html">
        PAO
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="Ekraf.html">
        EKRAF
       </a>
      </li>
      <li>
       <a class="block px-3 py-1 hover:bg-[#10b981] hover:text-white" href="PP.html">
        PP
       </a>
      </li>
     </ul>
    </li>
    
    <li>
     <a class="block py-1 hover:underline" href="berita.html">
      BERITA
     </a>
    </li>
    <li>
     <a class="block py-1 hover:underline" href="kontak.html">
      KONTAK
     </a>
    </li>
   </ul>
  </div>
  <section id="berita">
      <h2 class="section-title">Berita Terbaru</h2>
      <div id="news-list" class="news-list"></div>
    </section>
  <main class="container" id="newsContainer">
    <!-- Berita akan dimuat di sini -->
  </main><footer class="bg-green-600 py-6 mt-8 md:mt-12">
   <div class="max-w-3xl mx-auto flex justify-center space-x-12 mb-3">
    <a aria-label="Instagram" class="text-white text-3xl bg-gray-800 rounded-lg p-3 flex items-center justify-center w-14 h-14" href="https://www.instagram.com/hmps_asuransifebi?igsh=am5mMjY0NDZudnRz">
     <i class="fab fa-instagram">
     </i>
    </a>
    <a aria-label="TikTok" class="text-white text-3xl bg-gray-800 rounded-lg p-3 flex items-center justify-center w-14 h-14" href="https://www.tiktok.com/@hmps_asuransifebi?_t=ZS-8wLrdIW6C8Y&_r=1">
     <i class="fab fa-tiktok">
     </i>
    </a>
    <a aria-label="YouTube" class="text-white text-3xl bg-gray-800 rounded-lg p-3 flex items-center justify-center w-14 h-14" href="https://youtube.com/@officialhmpsasuransisyariah?si=V9Ulk33EGIgt3pwi">
     <i class="fab fa-youtube">
     </i>
    </a>
   </div>
   <p class="text-center text-black text-lg font-normal">
    ©ikmalfzi_
   </p>
  </footer>

  <script>
    
    function toggleDropdown() {
    const dropdown = document.getElementById("strukturDropdown");
    const btn = document.getElementById("strukturBtn");
    const isHidden = dropdown.classList.contains("hidden");
    if (isHidden) {
      dropdown.classList.remove("hidden");
      btn.setAttribute("aria-expanded", "true");
    } else {
      dropdown.classList.add("hidden");
      btn.setAttribute("aria-expanded", "false");
    }
  }
  // Close dropdown if clicked outside
  window.addEventListener("click", function (e) {
    const dropdown = document.getElementById("strukturDropdown");
    const btn = document.getElementById("strukturBtn");
    if (!btn.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.classList.add("hidden");
      btn.setAttribute("aria-expanded", "false");
    }
  });

  // Mobile menu toggle
  function toggleMobileMenu() {
    const menu = document.getElementById("mobileMenu");
    const btn = document.getElementById("mobileMenuBtn");
    if (menu.classList.contains("hidden")) {
      menu.classList.remove("hidden");
      btn.innerHTML = '<i class="fas fa-times"></i>';
    } else {
      menu.classList.add("hidden");
      btn.innerHTML = '<i class="fas fa-bars"></i>';
    }
  }

  // Mobile Struktur submenu toggle
  function toggleMobileDropdown() {
    const dropdown = document.getElementById("mobileStrukturDropdown");
    const btn = document.getElementById("mobileStrukturBtn");
    if (dropdown.classList.contains("hidden")) {
      dropdown.classList.remove("hidden");
      btn.setAttribute("aria-expanded", "true");
    } else {
      dropdown.classList.add("hidden");
      btn.setAttribute("aria-expanded", "false");
    }
  }
    
    // Format tanggal ke format Indonesia
    function formatDate(dateStr) {
      const months = [
        "Januari", "Februari", "Maret", "April", "Mei", "Juni",
        "Juli", "Agustus", "September", "Oktober", "November", "Desember"
      ];
      const d = new Date(dateStr);
      const day = d.getDate();
      const month = months[d.getMonth()];
      const year = d.getFullYear();
      return `${day} ${month} ${year}`;
    }

    // Ambil data berita dari localStorage (yang diupload dari admin.html)
    function loadNews() {
      const newsData = JSON.parse(localStorage.getItem("newsData")) || [];
      return newsData.sort((a,b) => new Date(b.date) - new Date(a.date));
    }

    // Render berita ke halaman dengan card style dan jarak antar card
    function renderNews() {
      const container = document.getElementById("newsContainer");
      container.innerHTML = "";
      const newsData = loadNews();
      if(newsData.length === 0){
        container.innerHTML = "<p class='text-center text-gray-500 text-lg select-none'>Belum ada berita.</p>";
        return;
      }
      newsData.forEach(news => {
        const article = document.createElement("article");
        article.className = "card";
        article.innerHTML = `
          <h2 class="article-title">${news.title}</h2>
          <p class="article-date">Dipublikasikan pada ${formatDate(news.date)}</p>
          <img src="${news.image}" alt="${news.title}" class="article-image" />
          <p class="article-summary">${news.summary}</p>
          <button class="read-more-btn" aria-label="Baca selengkapnya berita ${news.title}">Baca Selengkapnya
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="vertical-align: middle;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        `;
        const btnReadMore = article.querySelector(".read-more-btn");
        btnReadMore.addEventListener("click", () => {
          showFullArticle(news);
        });
        container.appendChild(article);
      });
    }

   // Simpan data like ke localStorage per berita id
    function saveLikes(likes) {
      localStorage.setItem("newsLikes", JSON.stringify(likes));
    }

    // Load likes dari localStorage
    function loadLikes() {
      return JSON.parse(localStorage.getItem("newsLikes")) || {};
    }

    // Simpan data share ke localStorage per berita id
    function saveShares(shares) {
      localStorage.setItem("newsShares", JSON.stringify(shares));
    }

    // Load shares dari localStorage
    function loadShares() {
      return JSON.parse(localStorage.getItem("newsShares")) || {};
    }

    // Render berita ke halaman dengan fitur like, share, dan baca selengkapnya
    function renderNews() {
      const container = document.getElementById("newsContainer");
      container.innerHTML = "";
      const newsData = loadNews();
      const likes = loadLikes();
      const shares = loadShares();
      if(newsData.length === 0){
        container.innerHTML = "<p class='text-center text-gray-500 text-lg select-none'>Belum ada berita.</p>";
        return;
      }
      newsData.forEach(news => {
        const article = document.createElement("article");
        article.className = "card";
        article.innerHTML = `
          <h2 class="article-title">${news.title}</h2>
          <p class="article-date">Dipublikasikan pada ${formatDate(news.date)}</p>
          <img src="${news.image}" alt="${news.title}" class="article-image" />
          <p class="article-summary">${news.summary}</p>
          <div class="actions">
            <button class="read-more-btn" aria-label="Baca selengkapnya berita ${news.title}">Baca Selengkapnya
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="vertical-align: middle;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
              </svg>
            </button>
            <button class="like-btn ${likes[news.id] ? 'liked' : ''}" aria-label="Like berita ${news.title}">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="${likes[news.id] ? 'red' : 'none'}" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle;">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
              <span class="count">${likes[news.id] || 0}</span>
            </button>
            <button class="share-btn" aria-label="Bagikan berita ${news.title}">Share
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="vertical-align: middle;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 12v.01M12 12v.01M20 12v.01M12 20v.01M12 4v.01M16.24 7.76l.01.01M7.76 16.24l.01.01M16.24 16.24l.01.01M7.76 7.76l.01.01" />
              </svg>
              <span class="count">${shares[news.id] || 0}</span>
            </button>
          </div>
        `;
        const btnReadMore = article.querySelector(".read-more-btn");
        btnReadMore.addEventListener("click", () => {
          showFullArticle(news);
        });
        const btnLike = article.querySelector(".like-btn");
        btnLike.addEventListener("click", () => {
          if (likes[news.id]) {
            likes[news.id] = likes[news.id] - 1;
            if (likes[news.id] < 0) likes[news.id] = 0;
          } else {
            likes[news.id] = 1;
          }
          saveLikes(likes);
          renderNews();
        });
        const btnShare = article.querySelector(".share-btn");
        btnShare.addEventListener("click", () => {
          shareNews(news);
          shares[news.id] = (shares[news.id] || 0) + 1;
          saveShares(shares);
          renderNews();
        });
        container.appendChild(article);
      });
    }

    // Menampilkan modal isi lengkap berita dengan foto dan responsif, plus like & share
    function showFullArticle(news) {
      const likes = loadLikes();
      const shares = loadShares();

      const modalOverlay = document.createElement("div");
      modalOverlay.className = "modal-overlay";

      const modalContent = document.createElement("div");
      modalContent.className = "modal-content";

      modalContent.innerHTML = `
        <button aria-label="Tutup modal" class="modal-close">&times;</button>
        <h2 class="modal-title">${news.title}</h2>
        <p class="modal-date">Dipublikasikan pada ${formatDate(news.date)}</p>
        <img src="${news.image}" alt="${news.title}" class="modal-image" />
        <p class="modal-text">${news.fullContent || news.summary}</p>
        <div class="modal-actions">
          <button class="like-btn ${likes[news.id] ? 'liked' : ''}" aria-label="Like berita ${news.title}">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="${likes[news.id] ? 'red' : 'none'}" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle;">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span class="count">${likes[news.id] || 0}</span>
          </button>
          <button class="share-btn" aria-label="Bagikan berita ${news.title}">Share
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="vertical-align: middle;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 12v.01M12 12v.01M20 12v.01M12 20v.01M12 4v.01M16.24 7.76l.01.01M7.76 16.24l.01.01M16.24 16.24l.01.01M7.76 7.76l.01.01" />
            </svg>
            <span class="count">${shares[news.id] || 0}</span>
          </button>
        </div>
      `;

      modalContent.querySelector(".modal-close").addEventListener("click", () => {
        document.body.removeChild(modalOverlay);
      });

 
    // Simpan data like ke localStorage per berita id
    function saveLikes(likes) {
      localStorage.setItem("newsLikes", JSON.stringify(likes));
    }

    // Load likes dari localStorage
    function loadLikes() {
      return JSON.parse(localStorage.getItem("newsLikes")) || {};
    }

    // Simpan data share ke localStorage per berita id
    function saveShares(shares) {
      localStorage.setItem("newsShares", JSON.stringify(shares));
    }

    // Load shares dari localStorage
    function loadShares() {
      return JSON.parse(localStorage.getItem("newsShares")) || {};
    }

    // Render berita ke halaman dengan fitur like, share, dan baca selengkapnya
    function renderNews() {
      const container = document.getElementById("newsContainer");
      container.innerHTML = "";
      const newsData = loadNews();
      const likes = loadLikes();
      const shares = loadShares();
      if(newsData.length === 0){
        container.innerHTML = "<p class='text-center text-gray-500 text-lg select-none'>Belum ada berita.</p>";
        return;
      }
      newsData.forEach(news => {
        const article = document.createElement("article");
        article.className = "card";
        article.innerHTML = `
          <h2 class="article-title">${news.title}</h2>
          <p class="article-date">Dipublikasikan pada ${formatDate(news.date)}</p>
          <img src="${news.image}" alt="${news.title}" class="article-image" />
          <p class="article-summary">${news.summary}</p>
          <div class="actions">
            <button class="read-more-btn" aria-label="Baca selengkapnya berita ${news.title}">Baca Selengkapnya
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="vertical-align: middle;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
              </svg>
            </button>
            <button class="like-btn ${likes[news.id] ? 'liked' : ''}" aria-label="Like berita ${news.title}">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="${likes[news.id] ? 'red' : 'none'}" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle;">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
              <span class="count">${likes[news.id] || 0}</span>
            </button>
            <button class="share-btn" aria-label="Bagikan berita ${news.title}">Share
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="vertical-align: middle;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 12v.01M12 12v.01M20 12v.01M12 20v.01M12 4v.01M16.24 7.76l.01.01M7.76 16.24l.01.01M16.24 16.24l.01.01M7.76 7.76l.01.01" />
              </svg>
              <span class="count">${shares[news.id] || 0}</span>
            </button>
          </div>
        `;
        const btnReadMore = article.querySelector(".read-more-btn");
        btnReadMore.addEventListener("click", () => {
          showFullArticle(news);
        });
        const btnLike = article.querySelector(".like-btn");
        btnLike.addEventListener("click", () => {
          if (likes[news.id]) {
            likes[news.id] = likes[news.id] - 1;
            if (likes[news.id] < 0) likes[news.id] = 0;
          } else {
            likes[news.id] = 1;
          }
          saveLikes(likes);
          renderNews();
        });
        const btnShare = article.querySelector(".share-btn");
        btnShare.addEventListener("click", () => {
          shareNews(news);
          shares[news.id] = (shares[news.id] || 0) + 1;
          saveShares(shares);
          renderNews();
        });
        container.appendChild(article);
      });
    }

    // Menampilkan modal isi lengkap berita dengan foto dan responsif, plus like & share
    function showFullArticle(news) {
      const likes = loadLikes();
      const shares = loadShares();

      const modalOverlay = document.createElement("div");
      modalOverlay.className = "modal-overlay";

      const modalContent = document.createElement("div");
      modalContent.className = "modal-content";

      modalContent.innerHTML = `
        <button aria-label="Tutup modal" class="modal-close">&times;</button>
        <h2 class="modal-title">${news.title}</h2>
        <p class="modal-date">Dipublikasikan pada ${formatDate(news.date)}</p>
        <img src="${news.image}" alt="${news.title}" class="modal-image" />
        <p class="modal-text">${news.fullContent || news.summary}</p>
        <div class="modal-actions">
          <button class="like-btn ${likes[news.id] ? 'liked' : ''}" aria-label="Like berita ${news.title}">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="${likes[news.id] ? 'red' : 'none'}" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle;">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span class="count">${likes[news.id] || 0}</span>
          </button>
          <button class="share-btn" aria-label="Bagikan berita ${news.title}">Share
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="vertical-align: middle;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 12v.01M12 12v.01M20 12v.01M12 20v.01M12 4v.01M16.24 7.76l.01.01M7.76 16.24l.01.01M16.24 16.24l.01.01M7.76 7.76l.01.01" />
            </svg>
            <span class="count">${shares[news.id] || 0}</span>
          </button>
        </div>
      `;

      modalContent.querySelector(".modal-close").addEventListener("click", () => {
        document.body.removeChild(modalOverlay);
      });

      // Like button in modal
      modalContent.querySelector(".like-btn").addEventListener("click", () => {
        if (likes[news.id]) {
          likes[news.id] = likes[news.id] - 1;
          if (likes[news.id] < 0) likes[news.id] = 0;
        } else {
          likes[news.id] = 1;
        }
        saveLikes(likes);
        // Update counts in modal and main page
        modalContent.querySelector(".like-btn .count").textContent = likes[news.id];
        modalContent.querySelector(".like-btn").classList.toggle("liked", likes[news.id] > 0);
        renderNews();
      });

      // Share button in modal
      modalContent.querySelector(".share-btn").addEventListener("click", () => {
        shareNews(news);
        shares[news.id] = (shares[news.id] || 0) + 1;
        saveShares(shares);
        modalContent.querySelector(".share-btn .count").textContent = shares[news.id];
        renderNews();
      });

      modalOverlay.addEventListener("click", (e) => {
        if (e.target === modalOverlay) {
          document.body.removeChild(modalOverlay);
        }
      });

      modalOverlay.appendChild(modalContent);
      document.body.appendChild(modalOverlay);
    }

    // Fungsi share berita
    function shareNews(news) {
      const shareData = {
        title: news.title,
        text: news.summary,
        url: window.location.href + "?newsId=" + news.id
      };
      if (navigator.share) {
        navigator.share(shareData).catch(() => {
          alert("Gagal membagikan berita.");
        });
      } else {
        // fallback: copy URL to clipboard
        navigator.clipboard.writeText(shareData.url).then(() => {
          alert("Link berita disalin ke clipboard.");
        }, () => {
          alert("Browser Anda tidak mendukung fitur share.");
        });
      }
    }

    // Jika ada query param newsId, buka modal langsung
    function openNewsFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const newsId = params.get("newsId");
      if (!newsId) return;
      const newsData = loadNews();
      const news = newsData.find(n => n.id === Number(newsId));
      if (news) {
        showFullArticle(news);
      }
    }


    // Render saat halaman dimuat
    renderNews();

    // Update otomatis jika data di localStorage berubah (misal dari tab admin)
    window.addEventListener("storage", (e) => {
      if(e.key === "newsData"){
        renderNews();
      }
    });
  </script>
</body>
</html>
